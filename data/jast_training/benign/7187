/*!
 * Vue-Backbone v0.1.0
 * https://github.com/mikeapr4/vue-backbone
 * @license MIT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueBackbone=t():e.VueBackbone=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function o(e,t){return i.indexOf(t)>-1?function(){var t=e.apply(this,arguments);return t&&(t._vuebackbone_proxy||t.map(function(e){return e._vuebackbone_proxy}))||t}:e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.map(function(e){return e._vuebackbone_proxy});for(var i in e)if("function"==typeof e[i]&&"constructor"!==i&&(t||-1===r.indexOf(i))){var u=e[i].bind(e);t||(u=o(u,i)),Object.defineProperty(n,i,{value:u})}return Object.defineProperty(n,"_vuebackbone_original",{value:e}),n};var r=["slice","forEach","map","reduce","reduceRight","find","filter","every","some","indexOf","lastIndexOf","findIndex"],i=["pop","shift","remove","get","at","where","findWhere","reject","sortBy","shuffle","toArray","detect","select","first","head","take","rest","tail","drop","initial","last","without"]},function(e,t,n){"use strict";function o(e,t,n,o){var r=t.get.bind(t,n),i=t.set.bind(t,n),u=e[n]?o+n:n;Object.defineProperty(e,u,{enumerable:!0,get:r,set:i})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={};for(var r in e)if("function"==typeof e[r]&&"constructor"!==r){var i=e[r].bind(e);Object.defineProperty(n,r,{value:i})}return Object.keys(e.attributes).forEach(function(r){o(n,e,r,t)}),n.id||Object.defineProperty(n,"id",{get:function(){return e.id}}),Object.defineProperty(n,"_vuebackbone_original",{value:e}),n}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){g.proxies&&!e._vuebackbone_proxy&&(e.models?(e.each(r),e._vuebackbone_proxy=(0,m.default)(e,g.simpleCollectionProxy)):e._vuebackbone_proxy=(0,k.default)(e,g.conflictPrefix))}function i(e){return e.attributes}function u(e){return e.map(i)}function a(e){return e.models?u(e):i(e)}function c(e){return g.addComputed&&g.proxies?g.dataPrefix+e:e}function f(e,t,n,o){g.proxies&&(o.on("add",r),n.onreset=function(){return o.each(r)},o.on("reset",n.onreset)),n.onchange=function(){if(e.$data[c(t)]=u(o),g.proxies){var n=o._vuebackbone_proxy;n.length=0,o.forEach(function(e,t){return n[t]=e._vuebackbone_proxy})}},o.on("reset sort remove add",n.onchange)}function b(e,t){e.onchange=function(){t.keys().length>Object.keys(t._previousAttributes).length&&console.warn("VueBackbone: Adding new Model attributes after binding is not supported, provide defaults for all properties")},t.on("change",e.onchange)}function s(e,t){var n=e._vuebackbone[t],o=n.bb;o.models?f(e,t,n,o):b(n,o)}function p(e,t){var n=e._vuebackbone[t];n&&(n.bb.off(null,n.onchange),n.onreset&&n.bb.off(null,n.onreset))}function d(e,t){var n=e.$options.data,o=a(e._vuebackbone[t].bb),r=c(t);e.$options.data=function(){var e={},i=n?n():{};if(i.hasOwnProperty(t))throw"VueBackbone: Property '"+t+"' mustn't exist within the Vue data already";if(i.hasOwnProperty(r))throw"VueBackbone: Property '"+r+"' mustn't exist within the Vue data already";return Object.keys(i).forEach(function(t){return e[t]=i[t]}),e[r]=o,e}}function l(e,t){var n=e._vuebackbone[t],o=c(t);e.$bb=e.$bb||{},Object.defineProperty(e.$bb,t,{get:function(){e.$data[o];return n.bb},set:function(r){p(e,t),n.bb=r,e.$data[o]=a(r),s(e,t)}})}function v(e,t){var n=e._vuebackbone[t],o=c(t),i=e.$options;i.computed=i.computed||{},i.computed[t]?console.warn("VueBackbone: Generated computed function '"+t+"' already exists within the Vue computed functions"):i.computed[t]={get:function(){e.$data[o];return n.bb._vuebackbone_proxy},set:function(i){p(e,t),r(i),n.bb=i,e.$data[o]=a(i),s(e,t)}}}function y(e,t,n,o){e._vuebackbone[t]={bb:n},r(n),o||(d(e,t),g.addComputed&&g.proxies?v(e,t):l(e,t)),s(e,t)}function _(e){return g.proxies?function(){var t=e.apply(this,arguments);return t&&(t._vuebackbone_proxy||t.map(function(e){return e._vuebackbone_proxy}))||t}:function(){var t=e.apply(this,arguments);return t&&(t.attributes||t.map(function(e){return e.attributes}))||t}}function h(e,t){for(var n in t)t.hasOwnProperty(n)&&(g[n]=t[n]);e.mixin(O)}function x(e){return e._vuebackbone_original||e}Object.defineProperty(t,"__esModule",{value:!0}),t.mapBBModels=_,t.install=h,t.original=x;var k=o(n(1)),m=o(n(0)),g={proxies:!0,conflictPrefix:"$",addComputed:!0,dataPrefix:"_",simpleCollectionProxy:!1},O={beforeCreate:function(){var e=this,t=e.$options.bb;if(t){if("function"!=typeof t)throw"VueBackbone: 'bb' initialization option must be a function";t=t(),e._vuebackbone={},Object.keys(t).forEach(function(n){var o=t[n],r=!1;if(!0===o.prop){if(!e.$options.propsData||!e.$options.propsData[n])throw"VueBackbone: Missing Backbone object in Vue prop '"+n+"'";o=e.$options.propsData[n],r=!0}if(!(o=o._vuebackbone_original||o).on||!o.attributes&&!o.models)throw"VueBackbone: Unrecognized Backbone object in Vue instantiation ("+n+"), must be a Collection or Model";y(e,n,o,r)})}},destroyed:function(){var e=this,t=e._vuebackbone;t&&Object.keys(t).forEach(function(t){return p(e,t)})}};t.default={install:h,mapBBModels:_,original:x}}])});